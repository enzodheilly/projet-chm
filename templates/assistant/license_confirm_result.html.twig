{% extends 'base.html.twig' %}

{% block title %}Confirmation licence
{% endblock %}

{% block body %}
	 <script>
			    // DÃ¨s que la page se charge, on envoie un "signal" au parent
			    window.addEventListener("load", () => {
			        if (window.opener && !window.opener.closed) {
			            window.opener.postMessage({
			                type: "licenseConfirmed",
			                ok: {{ ok ? 'true' : 'false' }},
			                reason: "{{ reason|e('js') }}"
			            }, "*");
			        }
			        // Ferme automatiquement la fenÃªtre au bout de 1 seconde
			        setTimeout(() => window.close(), 1000);
			    });
			</script>

	<div style="display:flex;justify-content:center;align-items:center;min-height:60vh;">
		{% if ok %}
			<div style="text-align:center;padding:2rem;background:#f0fdf4;border-radius:10px;box-shadow:0 4px 10px rgba(0,0,0,0.1);">
				<h2 style="color:#22c55e;">ğŸ‰ Confirmation rÃ©ussie</h2>
				<p>Vous pouvez fermer cette page.</p>
			</div>
		{% else %}
			<div style="text-align:center;padding:2rem;background:#fee2e2;border-radius:10px;">
				<h2 style="color:#ef4444;">âŒ Erreur</h2>
				<p>
					{% if reason == 'invalid' %}
						Lien de confirmation invalide.
					{% elseif reason == 'expired' %}
						Le lien de confirmation a expirÃ©.
					{% else %}
						Une erreur est survenue.
					{% endif %}
				</p>
			</div>
		{% endif %}
	</div>
{% endblock %}
