{% extends 'admin/base_admin.html.twig' %}
{% block title %}
	{{ title }}
{% endblock %}

{% block stylesheets %}
	<style>:root
	{
		--bg-dark: #0e0e10;
		--bg-darker: #141416;
		--bg-light: #1c1c1f;
		--text-main: #e5e7eb;
		--text-muted: #9ca3af;
		--accent: #ff6600;
		--border: #2a2a2d;
	}
	body {
		background: var(--bg-dark);
		color: var(--text-main);
		font-family: "Inter", system-ui, sans-serif;
	}
	.main-content {
		margin-left: 100px;
		padding: 2.5rem 3rem;
		background: var(--bg-dark);
		min-height: 100vh;
	}
	.dashboard-container {
		transform: scale(1.00);
		transform-origin: top left;
		width: 98.332%;
		margin-left: 1.5rem;
		overflow-x: hidden; /* Ã©vite tout scroll horizontal */
	}

	h1 {
		font-size: 2.3rem;
		font-weight: 800;
		margin-bottom: 2rem;
	}
	.stats-grid {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(230px, 1fr));
		gap: 1.2rem;
		margin-bottom: 2.5rem;
	}
	.stat-card {
		background: var(--bg-light);
		border: 1px solid var(--border);
		padding: 1.5rem;
		text-align: center;
	}
	.stat-card h3 {
		color: var(--text-muted);
		font-size: 1rem;
		margin-bottom: 0.5rem;
	}
	.stat-card p {
		color: #fff;
		font-size: 1.8rem;
		font-weight: 700;
		margin: 0;
	}
	.chart-container {
		background: var(--bg-light);
		border: 1px solid var(--border);
		padding: 1.5rem;
		margin-bottom: 2rem;
	}
</style>{% endblock %}{% block body %}
<div class="main-content">
	<div class="dashboard-container">
		<h1>ðŸ“Š
			{{ title }}</h1>

		<div class="stats-grid">
			<div class="stat-card">
				<h3>Utilisateurs</h3>
				<p>{{ totalUsers }}</p>
			</div>
			<div class="stat-card">
				<h3>Articles publiÃ©s</h3>
				<p>{{ totalArticles }}</p>
			</div>
			<div class="stat-card">
				<h3>AbonnÃ©s newsletter</h3>
				<p>{{ newsletterSubscribers }}</p>
			</div>
		</div>

		<div class="chart-container">
			<h3>ðŸ“ˆ Inscriptions (7 derniers jours)</h3>
			<canvas id="usersChart" height="80"></canvas>
		</div>

		<div class="chart-container">
			<h3>ðŸ“° Articles publiÃ©s (7 derniers jours)</h3>
			<canvas id="articlesChart" height="80"></canvas>
		</div>
	</div>
</div>

 <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
 <script>
const labels = {{ labels|json_encode|raw }};
const userRegistrations = {{ userRegistrations|json_encode|raw }};
const articlesPublished = {{ articlesPublished|json_encode|raw }};

// Graphique des utilisateurs
new Chart(document.getElementById('usersChart'), {
	type: 'line',
	data: {
		labels: labels,
		datasets: [{
			label: 'Inscriptions',
			data: userRegistrations,
			borderColor: '#ff6600',
			tension: 0.4,
			fill: false
		}]
	},
	options: { scales: { y: { beginAtZero: true } } }
});

// Graphique des articles
new Chart(document.getElementById('articlesChart'), {
	type: 'bar',
	data: {
		labels: labels,
		datasets: [{
			label: 'Articles publiÃ©s',
			data: articlesPublished,
			backgroundColor: '#ff6600'
		}]
	},
	options: { scales: { y: { beginAtZero: true } } }
});
</script>{% endblock %}
