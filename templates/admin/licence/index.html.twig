{% extends 'admin/base_admin.html.twig' %}

{% block title %}Gestion des licences
{% endblock %}

{% block stylesheets %}
	<style>:root
	{
		--bg-dark: #0e0e10;
		--bg-darker: #141416;
		--bg-light: #1c1c1f;
		--text-main: #e5e7eb;
		--text-muted: #9ca3af;
		--accent: #ff6600;
		--border: #2a2a2d;
	}

	body {
		font-family: "Inter", system-ui, sans-serif;
		background: var(--bg-dark);
		color: var(--text-main);
		margin: 0;
		min-height: 100vh;
	}

	.main-content {
		flex: 1;
		margin-left: 100px;
		padding: 2.5rem 3rem;
		display: flex;
		flex-direction: column;
		background: var(--bg-dark);
		min-height: 100vh;
	}

	/* ---------- HEADER ---------- */
	h1 {
		font-size: 2.3rem;
		font-weight: 800;
		color: #fff;
		margin-bottom: 2.5rem;
		display: flex;
		align-items: center;
		gap: 0.6rem;
	}

	/* ---------- BUTTONS ---------- */
	.btn {
		display: inline-flex;
		align-items: center;
		justify-content: center;
		padding: 0.6rem 1.2rem;
		border: none;
		border-radius: 6px;
		font-weight: 600;
		cursor: pointer;
		text-decoration: none;
		transition: all 0.2s ease;
		font-size: 0.9rem;
	}

	.btn-primary {
		background: var(--accent);
		color: #fff;
		box-shadow: 0 3px 10px rgba(255, 102, 0, 0.25);
	}
	.btn-primary:hover {
		background: #e25500;
		transform: translateY(-2px);
	}

	.btn-warning {
		background: #f59e0b;
		color: #000;
	}
	.btn-warning:hover {
		background: #d97706;
	}

	.btn-danger {
		background: #ef4444;
		color: #fff;
	}
	.btn-danger:hover {
		background: #dc2626;
	}

	.mb-3 {
		margin-bottom: 1.5rem;
	}

	/* ---------- TABLE ---------- */
	.table {
		width: 100%;
		border-collapse: collapse;
		font-size: 0.95rem;
		color: #e5e7eb;
		background: var(--bg-light);
		border: 1px solid var(--border);
	}

	.table th {
		background: var(--bg-darker);
		padding: 0.9rem 1rem;
		text-align: left;
		font-weight: 600;
		color: #fff;
		border-bottom: 1px solid var(--border);
	}

	.table td {
		padding: 0.9rem 1rem;
		border-bottom: 1px solid var(--border);
		vertical-align: top;
	}

	.table tbody tr:hover {
		background: rgba(255, 255, 255, 0.03);
	}

	/* ---------- LISTE D‚ÄôAVANTAGES ---------- */
	.table ul {
		margin: 0;
		padding-left: 1.2rem;
	}

	.table li {
		list-style: "‚úîÔ∏è ";
		margin-bottom: 0.2rem;
		color: var(--text-main);
	}

	/* ---------- ACTIONS ---------- */
	.table .btn {
		padding: 0.4rem 0.8rem;
		font-size: 0.85rem;
	}

	.table .btn + form {
		display: inline-block;
		margin-left: 0.5rem;
	}

	/* ---------- EMPTY STATE ---------- */
	.text-center {
		text-align: center;
		color: var(--text-muted);
		padding: 1rem;
	}

	/* ---------- RESPONSIVE ---------- */
	@media(max-width: 900px) {
		.main-content {
			margin-left: 0;
			padding: 1.5rem;
		}

		.table {
			font-size: 0.85rem;
		}

		h1 {
			font-size: 1.8rem;
		}
	}
</style>{% endblock %}{% block body %}
<div class="main-content">
	<h1>ü™™ Licences</h1>

	<a href="{{ path('admin_licence_new') }}" class="btn btn-primary mb-3">+ Nouvelle licence</a>

	<table class="table">
		<thead>
			<tr>
				<th>ID</th>
				<th>Pr√©nom</th>
				<th>Nom</th>
				<th>Email</th>
				<th>Num√©ro</th>
				<th>Type</th>
				<th>Date d‚Äôexpiration</th>
				<th>Actions</th>
			</tr>
		</thead>
		<tbody>
			{% for licence in licences %}
				<tr>
					<td>{{ licence.id }}</td>
					<td>{{ licence.firstName ?? '‚Äî' }}</td>
					<td>{{ licence.lastName ?? '‚Äî' }}</td>
					<td>{{ licence.email ?? '‚Äî' }}</td>
					<td>{{ licence.number }}</td>
					<td>{{ licence.type|capitalize }}</td>
					<td>{{ licence.expiryDate ? licence.expiryDate|date('d/m/Y') : '‚Äî' }}</td>

					<td>
						<div class="actions">
							<a href="{{ path('admin_licence_edit', {id: licence.id}) }}" class="btn btn-warning">‚úèÔ∏è Modifier</a>
							<form method="post" action="{{ path('admin_licence_delete', {id: licence.id}) }}" onsubmit="return confirm('Supprimer cette licence ?');" style="display:inline-block;">
								<input type="hidden" name="_token" value="{{ csrf_token('delete' ~ licence.id) }}">
								<button class="btn btn-danger">üóëÔ∏è Supprimer</button>
							</form>
						</div>
					</td>
				</tr>
			{% else %}
				<tr>
					<td colspan="8" class="text-center">Aucune licence trouv√©e</td>
				</tr>
			{% endfor %}
		</tbody>
	</table>


</div>{% endblock %}
