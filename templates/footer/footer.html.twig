<footer class="footer-chm">

    {% if isSubscribed is not defined %}
        {% set isSubscribed = false %}
    {% endif %}
    {% if subscriber is not defined %}
        {% set subscriber = null %}
    {% endif %}

    <div class="footer-main">

        <!-- Identité -->
        <div class="footer-column footer-brand">
            <h3>CHM SALEUX</h3>
            <p>
                Club d’Haltérophilie & Musculation à Saleux.
                Un lieu convivial pour se dépasser, progresser,
                et partager la passion du sport.
            </p>
        </div>

        <!-- Contact -->
        <div class="footer-column contact">
            <h4>Nous contacter</h4>
            <ul>
                <li><strong>Adresse :</strong> 12 Rue du Stade, 80480 Saleux</li>
                <li><strong>Téléphone :</strong> 03 22 00 00 00</li>
                <li><strong>Email :</strong>
                    <a href="mailto:contact@chmsaleux.fr">contact@chmsaleux.fr</a>
                </li>
            </ul>
        </div>

        <!-- Newsletter -->
        <div class="footer-column newsletter">
            <h4>Newsletter</h4>

            {% if app.user and isSubscribed %}
                <p class="already-subscribed">
                    ✅ Vous êtes déjà abonné avec
                    <strong>{{ app.user.email }}</strong>.<br>
                    <a href="{{ path('newsletter_unsubscribe', {'token': subscriber.unsubscribeToken}) }}"
                       class="unsubscribe-link">
                        Se désabonner
                    </a>
                </p>

            {% else %}
                <p>Recevez les actualités et événements du CHM directement dans votre boîte mail.</p>

                <form id="newsletter-form" method="POST" action="{{ path('newsletter_subscribe') }}">
                    <input type="hidden" name="_csrf_token" value="{{ csrf_token('newsletter') }}">

                    <div class="newsletter-inputs">
                        <input type="email" name="email" placeholder="Votre email"
                               value="{{ app.user ? app.user.email : '' }}" required>

<div class="button-wrap">
    <button type="submit" id="newsletter-submit" class="btn-club btn-newsletter">
        <span class="btn-text">S’ABONNER</span>

        <span class="icon-layer">
            <span class="spinner"></span>
            <span class="checkmark">✔</span>
        </span>
    </button>

    <div class="button-shadow"></div>
</div>


                    </div>
                    

                    <div id="turnstile-newsletter"
                         class="cf-turnstile cf-turnstile-newsletter"
                         data-sitekey="{{ turnstile_site_key }}">
                    </div>

                    <div id="newsletterSuccess" class="newsletter-feedback newsletter-success"></div>
                    <div id="newsletterError" class="newsletter-feedback newsletter-error"></div>
                </form>
            {% endif %}
        </div>
    </div>

    <!-- FULL WIDTH BANDE PAIEMENT + RÉSEAUX -->
    <div class="footer-payments-wrapper">
        <div class="payments-inner">

            <div class="payments-block">
                <h4>Moyens de paiement acceptés</h4>
                <div class="payment-icons">
                    <img src="{{ asset('images/payments/visa.png') }}" alt="Visa">
                    <img src="{{ asset('images/payments/mastercard.png') }}" alt="Mastercard">
                    <img src="{{ asset('images/payments/google.png') }}" alt="Google Pay">
                    <img src="{{ asset('images/payments/apple.png') }}" alt="Apple Pay">
                </div>
            </div>

            <div class="socials-block">
                <h4>Suivez-nous</h4>
                <div class="social-icons">
                    <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                    <a href="#" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
                </div>
            </div>

        </div>
    </div>

    <!-- Bas du footer -->
    <div class="footer-bottom">
        <div class="footer-left">
            &copy; 2025 CHM SALEUX — Tous droits réservés
        </div>

        <div class="footer-right">
            <a href="{{ path('page_show', {'slug': 'mentions-legales'}) }}">Mentions légales</a>
            <a href="{{ path('page_show', {'slug': 'conditions-utilisation'}) }}">Conditions d’utilisation</a>
            <a href="{{ path('page_show', {'slug': 'confidentialite'}) }}">Confidentialité</a>
            <a href="{{ path('page_show', {'slug': 'cookies'}) }}">Cookies</a>
        </div>
    </div>

</footer>